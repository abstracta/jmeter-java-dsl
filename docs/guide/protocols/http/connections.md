#### Connections

jmeter-java-dsl, as JMeter (and also K6), by default **reuses HTTP connections between thread iterations** to avoid common issues with port and file descriptors exhaustion which require manual OS tuning and may manifest in many ways.

This decision implies that the load generated from 10 threads and 100 iterations is not the same as the one generated by 1000 real users with up to 10 concurrent users in a given time, since the load imposed by each user connection and disconnection would only be generated once for each thread.

If you need for each iteration to reset connections you can use something like this:

```java
httpDefaults()
    .resetConnectionsBetweenIterations()
```

If you use this setting you might want to take a look at "Config your environment" section of [this article](https://medium.com/@chientranthien/how-to-generate-high-load-benchmark-with-jmeter-80e828a67592) to avoid port and file descriptors exhaustion.

::: tip
Connections are configured by default with a TTL (time-to-live) of 1 minute, which you can easily change like this:

```java
httpDefaults()
    .connectionTtl(Duration.ofMinutes(10))
```

* This and `resetConnectionsBetweenIterations` apply at the JVM level (due to JMeter limitation), so they affect all requests in the test plan and other ones potentially running in the same JVM instance.
  :::

::: warning
Using `clientImpl(HttpClientImpl.JAVA)` will ignore any of the previous settings and will reuse connections depending on JVM implementation.
:::
